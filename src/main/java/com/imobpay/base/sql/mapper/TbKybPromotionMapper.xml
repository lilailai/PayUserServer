<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.imobpay.base.dao.TbKybPromotionDao">


	<sql id="paramSql">
		<!-- 此处一定要增加一个查询 -->
		<if test="availamt !=null and availamt !=''">
			AND AVAILAMT = #{availamt}
		</if>
		<if test="totalamt !=null and totalamt !=''">
			AND TOTALAMT = #{totalamt}
		</if>
		<if test="inserttime !=null and inserttime !=''">
			AND INSERTTIME = #{inserttime}
		</if>
		<if test="status !=null and status !=''">
			AND STATUS = #{status}
		</if>
		<if test="customerid !=null and customerid !=''">
			AND CUSTOMERID = #{customerid}
		</if>
	</sql>

	<parameterMap type="com.imobpay.base.entity.TbKybPromotion" id="paramIdTbKybPromotion">
		<parameter property="pageflag" />
		<parameter property="curPage" />
		<parameter property="pageSize" />
		<parameter property="availamt" />
		<parameter property="totalamt" />
		<parameter property="inserttime" />
		<parameter property="status" />
		<parameter property="customerid" />
	</parameterMap>

	<resultMap type="com.imobpay.base.entity.TbKybPromotion" id="resultTbTbKybPromotion">
		<result column="AVAILAMT" property="availamt" />
		<result column="TOTALAMT" property="totalamt" />
		<result column="INSERTTIME" property="inserttime" />
		<result column="STATUS" property="status" />
		<result column="CUSTOMERID" property="customerid" />
	</resultMap>

	<select id="selectById" parameterMap="paramIdTbKybPromotion" resultMap="resultTbTbKybPromotion">
		SELECT * FROM TB_KYB_PROMOTION WHERE 1=1 AND ROWNUM = 1
		<include refid="paramSql"></include>
	</select>

	<select id="list" parameterMap="paramIdTbKybPromotion" resultMap="resultTbTbKybPromotion">
		<if test="pageflag==true">
			SELECT * FROM (
			SELECT A.*, ROWNUM RN FROM
			(
			SELECT * FROM TB_KYB_PROMOTION
			WHERE 1=1
			<include refid="paramSql"></include>
			) A WHERE ROWNUM &gt;= #{curPage}*#{pageSize}
			) WHERE RN &lt;=
			(#{curPage}-1)*#{pageSize}
		</if>
		<if test="pageBlag==false">
			SELECT * FROM TB_KYB_PROMOTION
			WHERE 1=1
			<include refid="paramSql"></include>
		</if>
	</select>

	<select id="listCount" parameterMap="paramIdTbKybPromotion" resultType="Integer">
		SELECT count(1) as count FROM TB_KYB_PROMOTION
		WHERE 1=1
		<include refid="paramSql"></include>
	</select>

	<!-- 添加 -->
	<insert id="insert" parameterMap="paramIdTbKybPromotion">
		INSERT INTO TB_KYB_PROMOTION
		(AVAILAMT,
		TOTALAMT, INSERTTIME, STATUS, CUSTOMERID)
		VALUES
		(#{availamt,jdbcType=VARCHAR},
		#{totalamt,jdbcType=VARCHAR},
		#{inserttime,jdbcType=VARCHAR},
		#{status,jdbcType=VARCHAR}, #{customerid,jdbcType=VARCHAR})
	</insert>

	<!-- 修改 -->
	<update id="update">
		UPDATE TB_KYB_PROMOTION SET
		<if test="availamt !=null and availamt !=''">

			AVAILAMT = #{availamt}
		</if>
		<if test="totalamt !=null and totalamt !=''">
			,
			TOTALAMT = #{totalamt}
		</if>
		<if test="inserttime !=null and inserttime !=''">
			,
			INSERTTIME = #{inserttime}
		</if>
		<if test="status !=null and status !=''">
			,
			STATUS = #{status}
		</if>
		<if test="customerid !=null and customerid !=''">
			,
			CUSTOMERID = #{customerid}
		</if>
		WHERE 1=1
		<include refid="paramSql"></include>
	</update>

</mapper>